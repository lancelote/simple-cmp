name: verify
on: [push]

jobs:
  verify:
    runs-on: ubuntu-latest
    steps:

     - name: checkout
       uses: actions/checkout@v6

     - name: setup
       uses: actions/setup-go@v6
       with:
         go-version-file: 'go.mod'

     - name: vet
       run: go vet ./...

     - name: fmt
       run: |
         files=$(gofmt -l .)
         if [ -n "$files" ]; then
           echo "badly formatted files"
           echo "$files"
           exit 1
         fi

     - name: test
       run: go test ./...

